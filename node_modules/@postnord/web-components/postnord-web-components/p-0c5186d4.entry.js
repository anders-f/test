import{r as e,h as n,a as i}from"./p-3aa90682.js";const t={SEARCH_BUTTON:{da:"Search",en:"Search",fi:"Search",no:"Search",sv:"Sök"},SEARCH_SUCCESS:{da:"Your OCR number is",en:"Your OCR number is",fi:"Your OCR number is",no:"Your OCR number is",sv:"Ditt OCR-nummer är"},ERROR_INVALID_LICENSE_NUMBER:{da:"Invalid license number",en:"Invalid license number",fi:"Invalid license number",no:"Invalid license number",sv:"Ogiltligt licensnummer"},ERROR_NO_RESULTS:{da:"The search did not generate any results",en:"The search did not generate any results",fi:"The search did not generate any results",no:"The search did not generate any results",sv:"Sökningen genererade inga träffar"},ERROR_REASON_HEADER:{da:"It may be due to:",en:"It may be due to:",fi:"It may be due to:",no:"It may be due to:",sv:"Det kan bero på:"},ERROR_REASON_ONE:{da:"We could not find that license number",en:"We could not find that license number",fi:"We could not find that license number",no:"We could not find that license number",sv:"Vi hittar inget sådant licensnummer"},ERROR_REASON_TWO:{da:"Check the information and try again.",en:"Check the information and try again.",fi:"Check the information and try again.",no:"Check the information and try again.",sv:"Kontrollera uppgifterna och försök igen."},PLACEHOLDER_TEXT:{da:"License number 6 digits",en:"License number 6 digits",fi:"License number 6 digits",no:"License number 6 digits",sv:"Licensnummer 6 tecken"}},s=class{constructor(n){e(this,n),this.language="",this.loading=!1,this.error=!1,this.ocrNumber="",this.searchSuccess=!1,this.invalidOcrNumber=!1}getTranslation(e,n){var i,s;return(null===(i=t[e])||void 0===i?void 0:i[n])||(null===(s=t[e])||void 0===s?void 0:s.sv)||e}handleSearch(e){this.invalidOcrNumber=!1,this.searchSuccess=!1,this.error=!1;const n=this.validateOcrNumber(e.detail);n.error?this.invalidOcrNumber=!0:this.ocrNumberSearch(n.value)}async ocrNumberSearch(e){this.loading=!0,await fetch(`https://portal.postnord.com/public-service/api/ocr?key=${e}`).then((e=>e.json())).then((e=>{this.loading=!1,this.ocrNumber=e.newOcr,this.searchSuccess=!0})).catch((()=>{this.error=!0,this.loading=!1,this.searchSuccess=!1}))}validateOcrNumber(e){const n=e?e.replace(/[ -]/gi,""):"";return{error:new RegExp(/\D+/).test(n)||6!==n.length,value:n}}renderSearchResult(){if(!this.loading&&!this.error&&this.searchSuccess)return n("div",{class:"search-results"},this.getTranslation("SEARCH_SUCCESS",this.language),": ",n("b",null,this.ocrNumber))}renderErrorMessage(){return this.invalidOcrNumber&&!this.loading?n("div",{class:"invalid-text-container"},n("p",{class:"invalid-ocr"},this.getTranslation("ERROR_INVALID_LICENSE_NUMBER",this.language))):this.error&&!this.loading?n("div",{class:"error-text-container"},n("p",{class:"bold"},this.getTranslation("ERROR_NO_RESULTS",this.language)),n("p",{class:"bold"},this.getTranslation("ERROR_REASON_HEADER",this.language)),n("p",null,this.getTranslation("ERROR_REASON_ONE",this.language)),n("p",null,this.getTranslation("ERROR_REASON_TWO",this.language))):void 0}render(){return n(i,null,n("pn-search-field",{loading:this.loading,label:this.getTranslation("SEARCH_BUTTON",this.language),button:"",placeholder:this.getTranslation("PLACEHOLDER_TEXT",this.language),onSearch:e=>this.handleSearch(e)}),this.renderSearchResult(),this.renderErrorMessage())}};s.style="pn-ocr-search .bold{font-weight:700}pn-ocr-search .search-results,pn-ocr-search .error-text-container{padding:1em 0.5em}pn-ocr-search .invalid-text-container{padding:0.5em 1em}pn-ocr-search .invalid-text-container .invalid-ocr{color:#a70707}";export{s as pn_ocr_search}