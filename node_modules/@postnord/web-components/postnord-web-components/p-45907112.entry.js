import{r as t,c as i,f as s,h as o,a as n,g as a}from"./p-3aa90682.js";const e=class{constructor(s){t(this,s),this.close=i(this,"close",7),this.open=!1,this.handleFocus=this.focusHandler.bind(this),this.handleBlur=this.blurHandler.bind(this),this.handleEsc=this.escHandler.bind(this),this.handleGlobalClick=this.globalClickHandler.bind(this)}componentDidLoad(){this.mo&&this.mo.disconnect(),(this.mo=new MutationObserver((()=>{s(this.hostElement),this.setFocusableElements()}))).observe(this.hostElement.querySelector(".pn-modal"),{childList:!0,subtree:!0}),this.open&&this.addEventListeners(),this.setFocusableElements()}openHandler(){this.open?this.addEventListeners():(this.removeEventListeners(),this.elToFocus=null,this.close.emit(this.open))}setFocusableElements(){requestAnimationFrame((()=>{this.focusableEls=Array.from(this.hostElement.querySelectorAll('a[href], button, input, textarea, select, details, [tabindex]:not([tabindex="-1"]):not(.pn-modal-backdrop), pn-option')),this.untabbable=Array.from(this.hostElement.querySelectorAll('[tabindex="-1"]'))}))}addEventListeners(){const t=this.hostElement.getRootNode();t.addEventListener("focusin",this.handleFocus),t.addEventListener("focusout",this.handleBlur),t.addEventListener("keydown",this.handleEsc),requestAnimationFrame((()=>{document.addEventListener("pointerdown",this.handleGlobalClick)}))}removeEventListeners(){const t=this.hostElement.getRootNode();t.removeEventListener("focusin",this.handleFocus),t.removeEventListener("focusout",this.handleBlur),t.removeEventListener("keydown",this.handleEsc),document.removeEventListener("pointerdown",this.handleGlobalClick)}focusHandler(t){const i=t.composedPath()[0];if(!this.focusableEls.includes(i)&&!this.untabbable.includes(i)||i.classList.contains("pn-modal-backdrop")){if(this.elToFocus)return void this.elToFocus.focus();this.focusableEls[0].focus()}}blurHandler(t){var i;const s=null===(i=t.composedPath)||void 0===i?void 0:i.call(t)[0],o=this.focusableEls.indexOf(s),n=this.focusableEls.length-1;0===o&&(this.elToFocus=this.focusableEls[n]),o===n&&(this.elToFocus=this.focusableEls[0])}escHandler({code:t}){"Escape"===t&&(this.open=!1)}globalClickHandler(t){var i;const s=null===(i=t.composedPath)||void 0===i?void 0:i.call(t)[0];this.hostElement.contains(s)&&!s.classList.contains("pn-modal-backdrop")||(t.preventDefault(),this.open=!1)}render(){return o(n,{"data-open":this.open},o("div",{class:"pn-modal-backdrop",tabindex:"0"}),o("div",{class:"pn-modal"},o("button",{class:"pn-modal-close-button",onClick:()=>this.open=!1,type:"button",title:"close","aria-label":"close"},o("pn-icon",{symbol:"close",color:"blue700"})),o("div",{class:"pn-modal-content"},o("slot",null)),o("slot",{name:"buttons"})),o("div",{class:"pn-modal-backdrop",tabindex:"0"}))}get hostElement(){return a(this)}static get watchers(){return{open:["openHandler"]}}};e.style="pn-modal .pn-modal{position:fixed;bottom:50%;left:50%;width:95%;max-width:45em;max-height:85vh;border:0.1rem solid #f3f2f2;border-radius:0.8rem;-webkit-transform:translate(-50%, 60%);transform:translate(-50%, 60%);-webkit-box-shadow:0px 4.8px 14.4px rgba(0, 0, 0, 0.18), 0px 25.6px 57.6px rgba(0, 0, 0, 0.22);box-shadow:0px 4.8px 14.4px rgba(0, 0, 0, 0.18), 0px 25.6px 57.6px rgba(0, 0, 0, 0.22);background:#ffffff;z-index:999;-webkit-transition:none;transition:none;pointer-events:none;opacity:0;visibility:hidden;overflow-y:auto;-webkit-transition:visibility 0s linear 0.55s, opacity 0.25s 0.15s, -webkit-transform 0.55s cubic-bezier(0.7, 0, 0.3, 1);transition:visibility 0s linear 0.55s, opacity 0.25s 0.15s, -webkit-transform 0.55s cubic-bezier(0.7, 0, 0.3, 1);transition:visibility 0s linear 0.55s, opacity 0.25s 0.15s, transform 0.55s cubic-bezier(0.7, 0, 0.3, 1);transition:visibility 0s linear 0.55s, opacity 0.25s 0.15s, transform 0.55s cubic-bezier(0.7, 0, 0.3, 1), -webkit-transform 0.55s cubic-bezier(0.7, 0, 0.3, 1)}pn-modal[data-open] .pn-modal{visibility:visible;opacity:1;pointer-events:auto;-webkit-transition:visibility 0s linear 0s, opacity 0.55s, -webkit-transform 0.55s cubic-bezier(0.7, 0, 0.3, 1);transition:visibility 0s linear 0s, opacity 0.55s, -webkit-transform 0.55s cubic-bezier(0.7, 0, 0.3, 1);transition:visibility 0s linear 0s, opacity 0.55s, transform 0.55s cubic-bezier(0.7, 0, 0.3, 1);transition:visibility 0s linear 0s, opacity 0.55s, transform 0.55s cubic-bezier(0.7, 0, 0.3, 1), -webkit-transform 0.55s cubic-bezier(0.7, 0, 0.3, 1);-webkit-transform:translate(-50%, 50%);transform:translate(-50%, 50%)}.pn-modal>.pn-modal-content{width:100%;padding:1.5em}.pn-modal>.pn-modal-close-button{position:absolute;right:1em;top:1em;outline:none;border:none;border-radius:50%;padding:0.3em;-webkit-transition:background 0.15s, -webkit-box-shadow 0.15s;transition:background 0.15s, -webkit-box-shadow 0.15s;transition:box-shadow 0.15s, background 0.15s;transition:box-shadow 0.15s, background 0.15s, -webkit-box-shadow 0.15s;cursor:pointer;background:#ffffff}.pn-modal>.pn-modal-close-button svg path{-webkit-transition:fill 0.15s;transition:fill 0.15s;pointer-events:none}.pn-modal>.pn-modal-close-button:hover,.pn-modal>.pn-modal-close-button:focus{background:#e0f8ff}.pn-modal>.pn-modal-close-button:focus{-webkit-box-shadow:0 0 0 0.2rem #fff, 0 0 0 0.4rem #005d92;box-shadow:0 0 0 0.2rem #fff, 0 0 0 0.4rem #005d92}.pn-modal>.pn-modal-close-button:active{background:#0d234b}.pn-modal>.pn-modal-close-button:active svg path{fill:#ffffff}pn-modal .pn-modal>[slot=buttons]{position:static;width:100%;background:white;border-top:0.1rem solid #d3cecb;padding:0.5em 1em;display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end;-ms-flex-wrap:wrap-reverse;flex-wrap:wrap-reverse}pn-modal .pn-modal>[slot=buttons]>*{margin:0.5em}pn-modal>.pn-modal-backdrop{position:fixed;width:120vw;height:120vh;top:-10vh;left:-10vw;background:#2d2013;opacity:0;z-index:9;visibility:hidden;-webkit-transition:visibility 0s linear 0.3s, opacity 0.3s;transition:visibility 0s linear 0.3s, opacity 0.3s}pn-modal[data-open] .pn-modal-backdrop{opacity:0.65;visibility:visible;-webkit-transition:visibility 0s linear 0s, opacity 0.3s;transition:visibility 0s linear 0s, opacity 0.3s}@media screen and (max-width: 30em){pn-modal .pn-modal{width:100%;max-height:95vh;bottom:0;-webkit-transform:translate(-50%, 10%);transform:translate(-50%, 10%);border-radius:0.8rem 0.8rem 0 0}pn-modal[data-open] .pn-modal{-webkit-transform:translate(-50%, 0);transform:translate(-50%, 0)}pn-modal .pn-modal>[slot=buttons]{-ms-flex-pack:center;justify-content:center}pn-modal .pn-modal>[slot=buttons]>*{-ms-flex:1 0 auto;flex:1 0 auto}}@supports ((position: -webkit-sticky) or (position: sticky)){pn-modal .pn-modal>[slot=buttons]{position:-webkit-sticky;position:sticky;bottom:0;left:0;z-index:2}pn-modal .pn-modal>.pn-modal-close-button{position:-webkit-sticky;position:sticky;display:block;left:100%;margin:1em 1em 0 0;z-index:10}pn-modal .pn-modal>.pn-modal-content{margin-top:-3em}}";export{e as pn_modal}