import{r as t,c as e,f as s,h as i,a as o,g as n}from"./p-3aa90682.js";const r=class{constructor(s){t(this,s),this.selectchange=e(this,"selectchange",7),this.checkchange=e(this,"checkchange",7),this.searchable=!1,this.label=null,this.placeholder=null,this.searchPlaceholder=null,this.checkbox=!1,this.checkboxid="",this.checked=!1,this.indeterminate=!1,this.error="",this.invalid=!1,this.value=null,this.internalValue=null,this.open=!1,this.upwards=!1,this.loaded=!1,this.handleGlobalEvents=this.globalHandler.bind(this),this.hiddenOptions=[],this.visibleOptions=[],this.searchDebounce=null}componentWillLoad(){this.loaded=!0}componentDidLoad(){this.registerEventHandlers(),this.mo&&this.mo.disconnect(),(this.mo=new MutationObserver((()=>{s(this.hostElement),this.elementInit()}))).observe(this.hostElement,{childList:!0}),this.initialize()}initialize(){this.elementInit()}changeHandler(t){const e=t.composedPath()[0];e===this.parentCheckbox&&(this.checked=e.checked,this.indeterminate=!1,this.checkchange.emit(t))}selectOptionHandler(t){const e=t.composedPath()[0];this.hostElement.querySelector(".current-selection pn-option").innerHTML=e.innerHTML,this.options.forEach((t=>{t!==e&&t.removeAttribute("selected")})),this.internalValue=t.detail,this.selectchange.emit(this.internalValue),this.open=!1}stateHandler(){this.flip((()=>{this.hostElement.dataset.state=this.open?"open":"collapsed",this.open&&this.checkOrientation()}),this.animatedEls),this.open&&(document.addEventListener("click",this.handleGlobalEvents),document.addEventListener("keyup",this.handleGlobalEvents),document.addEventListener("scroll",this.handleGlobalEvents)),this.open||(document.removeEventListener("click",this.handleGlobalEvents),document.removeEventListener("keyup",this.handleGlobalEvents),document.removeEventListener("scroll",this.handleGlobalEvents),this.hostElement.focus())}globalHandler(t){const e=t.composedPath()[0];if(this.hostElement.contains(e)||"scroll"===t.type){if("scroll"===t.type){const t=this.hostElement.getBoundingClientRect().top;(window.innerHeight-this.hostElement.getBoundingClientRect().bottom<=0||t<=0)&&(this.open=!1)}}else this.open=!1}elementInit(){if(this.options=Array.from(this.hostElement.querySelectorAll(".select-options pn-option")),this.selectEl=this.hostElement.querySelector(".pn-select"),this.selectContent=this.hostElement.querySelector(".select-content"),this.animatedEls=this.hostElement.querySelectorAll("[data-select-flip]"),this.optionsList=this.hostElement.querySelector(".select-options"),this.searchable&&(this.searchField=this.hostElement.querySelector(".select-search-input")),this.checkbox){this.parentCheckbox=this.hostElement.querySelector(".current-selection pn-checkbox input");const t=Array.from(this.hostElement.querySelectorAll(".select-options pn-checkbox input"));if(t.length<=0)return;t.forEach((t=>{t.setAttribute("tabindex","-1")}))}this.options.forEach(((t,e)=>{t.dataset.index=`${e}`,t.style.setProperty("--i",`${e=this.searchable?e+1:e}`),t.setAttribute("index",`${e}`),t.setAttribute("select-has-loaded",`${this.loaded}`),this.value&&t.setAttribute("parent-value",`${this.value}`)}))}setFocusToList(){const{activeElement:t}=this.hostElement.getRootNode();requestAnimationFrame((()=>{if("PN-OPTION"!==t.nodeName){if(this.searchable)return void this.searchField.focus();if(this.visibleOptions.length>0)return void this.visibleOptions[0].focus();this.options[0].focus()}}))}focusNextOption(){const{activeElement:t}=this.hostElement.getRootNode();if(t!==this.hostElement.querySelector(".select-search-input"))if(t.nextElementSibling&&"PN-OPTION"===t.nextElementSibling.nodeName){if(t.nextElementSibling.classList.contains("hidden")){const e=this.options.find(((e,s)=>{if(s>parseInt(t.dataset.index)&&!e.classList.contains("hidden"))return e}));return void(e&&e.focus())}t.nextElementSibling.focus()}else this.setFocusToList();else this.options.find((t=>{if(!t.classList.contains("hidden"))return t})).focus()}focusPrevOption(){const{activeElement:t}=this.hostElement.getRootNode();if(t!==this.hostElement.querySelector(".select-search-input"))if(!this.searchable||t!==this.visibleOptions[0]&&!t.previousElementSibling.classList.contains("select-search"))if(t.previousElementSibling&&"PN-OPTION"===t.previousElementSibling.nodeName){if(t.previousElementSibling.classList.contains("hidden")){const e=this.options.find(((e,s)=>{if(s<parseInt(t.dataset.index)&&!e.classList.contains("hidden"))return e}));return void(e&&e.focus())}t.previousElementSibling.focus()}else this.setFocusToList();else this.searchField.focus();else this.options.find((t=>{if(!t.classList.contains("hidden"))return t})).focus()}registerEventHandlers(){this.hostElement.addEventListener("click",(t=>{const e=t.composedPath()[0];("PN-OPTION"!==e.nodeName&&null===e.closest(".pn-option-content")&&null===e.closest("pn-checkbox")&&null===e.closest(".select-search")||null!==e.closest("pn-option")&&e.closest("pn-option").hasAttribute("selected"))&&(this.open=!this.open)}));const t=["Enter","Space","ArrowUp","ArrowDown"];this.hostElement.addEventListener("keydown",(e=>{const s=e.composedPath()[0];if(t.includes(e.code)){if((null===s.closest(".select-search")||["ArrowUp","ArrowDown"].includes(e.code))&&e.preventDefault(),!this.open)return this.open=!0,void this.setFocusToList();["Space","Enter"].includes(e.code)&&("PN-OPTION"!==s.nodeName||s.hasAttribute("selected"))&&null===s.closest(".select-search")&&(this.open=!1),["ArrowUp","ArrowDown"].includes(e.code)&&(this.upwards?("ArrowUp"===e.code&&this.focusNextOption(),"ArrowDown"===e.code&&this.focusPrevOption()):("ArrowUp"===e.code&&this.focusPrevOption(),"ArrowDown"===e.code&&this.focusNextOption()))}"Escape"===e.code&&(this.open=!1)}))}checkOrientation(){this.optionsList.style.removeProperty("max-height");const t=this.hostElement.getBoundingClientRect().bottom,e=window.innerHeight-t,s=this.hostElement.getBoundingClientRect().top,i=this.selectContent.getBoundingClientRect().height;if(window.innerHeight-t<i&&s>window.innerHeight-t){if(this.upwards=!0,this.hostElement.classList.add("upwards"),s<i){if(s-50<250)return void this.optionsList.style.setProperty("max-height","250px");if(s-50>600)return void this.optionsList.style.setProperty("max-height","600px");this.optionsList.style.setProperty("max-height",s-50+"px")}}else if(this.upwards=!1,this.hostElement.classList.remove("upwards"),e<i){if(e-50<250)return void this.optionsList.style.setProperty("max-height","250px");if(e-50>600)return void this.optionsList.style.setProperty("max-height","600px");this.optionsList.style.setProperty("max-height",e-50+"px")}}getRect(t){return t.getBoundingClientRect()}flip(t,e,s=(()=>e)){const i=Array.from(e).map((t=>[t,this.getRect(t)]));requestAnimationFrame((()=>{t();const e=Array.from(s()).map((t=>[t,this.getRect(t)]));i.forEach((([t,s],i)=>{let[o,n]=e[i];const r=n.x-s.x,a=n.y-s.y,c=n.width/s.width,l=n.height/s.height;o.dataset.flipping=!0,o.style.setProperty("--dx",r),o.style.setProperty("--dy",a),o.style.setProperty("--dw",c),o.style.setProperty("--dh",l),requestAnimationFrame((()=>delete o.dataset.flipping))}))}))}manageOptionVisibility(t,e){t?this.flip((()=>{this.optionsList.dataset.hidden="true"}),[...this.options,...this.animatedEls]):(this.flip((()=>{delete this.optionsList.dataset.hidden}),[...this.options,...this.animatedEls]),e.forEach((t=>{t.classList.remove("hidden")})))}filterSearch({target:t}){null!==this.searchDebounce&&(clearTimeout(this.searchDebounce),this.searchDebounce=null),this.searchDebounce=setTimeout((()=>{this.hiddenOptions=[],this.visibleOptions=[],this.options.forEach((e=>{e.innerText.toLowerCase().includes(t.value.toLowerCase())?(e.setAttribute("tabindex","-1"),this.visibleOptions.push(e)):(e.classList.add("hidden"),e.removeAttribute("tabindex"),this.hiddenOptions.push(e))})),this.hiddenOptions.length>0?this.manageOptionVisibility(!0,null):this.manageOptionVisibility(!1,this.visibleOptions)}),200)}getClassNames(){let t="pn-select ";return this.searchable&&(t+="search "),this.label&&(t+="select-label "),(this.error||this.invalid)&&(t+="select-error "),this.error&&(t+="select-error-message "),t}render(){return i(o,{class:this.getClassNames(),tabindex:"0","data-state":"collapsed"},this.label&&i("label",null,this.label),i("span",null,this.placeholder||""),i("div",{class:"select-content","data-select-flip":!0},i("div",{class:"select-bg-top","data-select-flip":!0}),i("div",{class:"select-bg-bottom","data-select-flip":!0}),i("div",{class:"select-bg"}),i("div",{class:"current-selection"},this.checkbox&&i("pn-checkbox",{checkboxid:this.checkboxid,checked:this.checked,indeterminate:this.indeterminate}),i("pn-option",null,this.placeholder),i("svg",{class:"arrow",width:"18",height:"10",viewBox:"0 0 18 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M9.70711 9.70711C9.31658 10.0976 8.68342 10.0976 8.29289 9.70711L0.292892 1.70711C-0.0976315 1.31658 -0.0976315 0.683417 0.292892 0.292893C0.683418 -0.0976315 1.31658 -0.0976315 1.70711 0.292893L9 7.58579L16.2929 0.292893C16.6834 -0.0976315 17.3166 -0.0976315 17.7071 0.292893C18.0976 0.683417 18.0976 1.31658 17.7071 1.70711L9.70711 9.70711Z"}))),i("div",{class:"select-options","aria-hidden":!this.open},i("hr",null),this.searchable&&i("div",{class:"select-search",style:{"--i":"0"}},i("input",{class:"select-search-input",tabindex:this.open?"0":"-1",onInput:t=>this.filterSearch(t),type:"text",placeholder:this.searchPlaceholder})),i("slot",null))),this.error&&i("small",null,i("pn-icon",{symbol:"alert-exclamation-circle",small:!0,color:"warning"}),this.error))}get hostElement(){return n(this)}static get watchers(){return{open:["stateHandler"]}}};r.style="pn-select{cursor:pointer;outline:none;position:relative;display:-ms-flexbox;display:flex;padding:0.6em 1em;z-index:0;-webkit-transition:z-index 0s 0.5s;transition:z-index 0s 0.5s;}pn-select.select-label{padding-top:1.9em}pn-select.select-label .select-content{margin-top:1.9em}pn-select.select-label>label{position:absolute;top:1.25em;left:0;-webkit-transform:translateY(-100%);transform:translateY(-100%);font-size:0.875em;color:#5e554a}pn-select.select-error{color:#a70707}pn-select.select-error.select-error-message{padding-bottom:1.9em}pn-select.select-error.select-error-message .select-content{margin-bottom:1.9em}pn-select.select-error>label{color:#a70707}pn-select.select-error .current-selection>pn-option{color:#a70707}pn-select.select-error .current-selection>svg.arrow{fill:#a70707}pn-select.select-error>small{color:#a70707;font-size:0.75em;position:absolute;bottom:1.25em;left:0;-webkit-transform:translateY(100%);transform:translateY(100%)}pn-select.select-error>small>pn-icon{margin-right:0.25em}pn-select.select-error .select-bg-top,pn-select.select-error .select-bg-bottom,pn-select.select-error .select-bg{border-color:#a70707}pn-select>span{min-height:1.5em;display:block;width:100%;white-space:nowrap;opacity:0;padding-right:2em}pn-select:hover .select-bg,pn-select:hover .select-bg-top,pn-select:hover .select-bg-bottom{border-color:#00a0d6}pn-select:focus .select-bg-top,pn-select:focus-within .select-bg-top,pn-select:not(.search):active .select-bg-top{border-color:#005d92;-webkit-box-shadow:-0.065em -0.065em 0 0 #005d92, 0.065em -0.065em 0 0 #005d92;box-shadow:-0.065em -0.065em 0 0 #005d92, 0.065em -0.065em 0 0 #005d92}pn-select:focus .select-bg,pn-select:focus-within .select-bg,pn-select:not(.search):active .select-bg{border-color:#005d92;-webkit-box-shadow:-0.065em 0 0 0 #005d92, -0.065em 0 0 0 #005d92, 0.065em 0 0 0 #005d92, 0.065em 0 0 0 #005d92;box-shadow:-0.065em 0 0 0 #005d92, -0.065em 0 0 0 #005d92, 0.065em 0 0 0 #005d92, 0.065em 0 0 0 #005d92}pn-select:focus .select-bg-bottom,pn-select:focus-within .select-bg-bottom,pn-select:not(.search):active .select-bg-bottom{border-color:#005d92;-webkit-box-shadow:0.065em 0.065em 0 0 #005d92, -0.065em 0.065em 0 0 #005d92;box-shadow:0.065em 0.065em 0 0 #005d92, -0.065em 0.065em 0 0 #005d92}.current-selection{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;padding:0 1em;position:relative;z-index:2;min-height:1.5em}.current-selection pn-checkbox{margin-right:0.5em}.current-selection pn-option{pointer-events:none;color:#005d92;font-weight:500;overflow:hidden;white-space:nowrap;-ms-flex:1 1;flex:1 1}.current-selection pn-option .pn-option-content{width:100%;overflow-x:hidden;text-overflow:ellipsis}.current-selection>svg.arrow{-webkit-transition:-webkit-transform 0.2s cubic-bezier(0.7, 0, 0.3, 1) 0.2s;transition:-webkit-transform 0.2s cubic-bezier(0.7, 0, 0.3, 1) 0.2s;transition:transform 0.2s cubic-bezier(0.7, 0, 0.3, 1) 0.2s;transition:transform 0.2s cubic-bezier(0.7, 0, 0.3, 1) 0.2s, -webkit-transform 0.2s cubic-bezier(0.7, 0, 0.3, 1) 0.2s;fill:#005d92;-ms-flex-negative:0;flex-shrink:0;margin-left:0.5em}.select-content{position:absolute;z-index:3;top:0;left:0;margin:0.6em 0;width:100%;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-webkit-transform-origin:top left;transform-origin:top left;-webkit-transition:border 0.1s, -webkit-transform 0.2s 0.2s cubic-bezier(0.7, 0, 0.3, 1), -webkit-box-shadow 0.1s;transition:border 0.1s, -webkit-transform 0.2s 0.2s cubic-bezier(0.7, 0, 0.3, 1), -webkit-box-shadow 0.1s;transition:transform 0.2s 0.2s cubic-bezier(0.7, 0, 0.3, 1), border 0.1s, box-shadow 0.1s;transition:transform 0.2s 0.2s cubic-bezier(0.7, 0, 0.3, 1), border 0.1s, box-shadow 0.1s, -webkit-transform 0.2s 0.2s cubic-bezier(0.7, 0, 0.3, 1), -webkit-box-shadow 0.1s}.select-content[data-flipping]{-webkit-transition:none;transition:none}div.select-options{position:absolute;left:0;right:0;top:100%;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;pointer-events:none;padding:0.1em;z-index:3;overflow-y:auto;overflow-x:hidden;visibility:hidden;-webkit-transition:visibility 0s 0.2s;transition:visibility 0s 0.2s}div.select-options>*{width:100%}div.select-options>hr{border:0.065em solid #005d92;border-bottom:0;margin:0.6em 0 0;opacity:0;-webkit-transition:opacity 0.4s;transition:opacity 0.4s}div.select-options input[type=text]{border:0.065em solid #5e554a;width:100%;padding:0.5em;border-radius:0.5em;outline:none;-webkit-transition:border 0.1s, -webkit-box-shadow 0.1s ease-in-out;transition:border 0.1s, -webkit-box-shadow 0.1s ease-in-out;transition:box-shadow 0.1s ease-in-out, border 0.1s;transition:box-shadow 0.1s ease-in-out, border 0.1s, -webkit-box-shadow 0.1s ease-in-out}div.select-options input[type=text]:hover{border:0.065em solid #00a0d6}div.select-options input[type=text]:focus{-webkit-box-shadow:0 0 0 0.065em #005d92;box-shadow:0 0 0 0.065em #005d92;border:0.065em solid #005d92}div.select-options .select-search,div.select-options pn-option{-webkit-transition:opacity 0.4s, -webkit-transform 0.4s cubic-bezier(0.7, 0, 0.1, 1) 0.2s;transition:opacity 0.4s, -webkit-transform 0.4s cubic-bezier(0.7, 0, 0.1, 1) 0.2s;transition:transform 0.4s cubic-bezier(0.7, 0, 0.1, 1) 0.2s, opacity 0.4s;transition:transform 0.4s cubic-bezier(0.7, 0, 0.1, 1) 0.2s, opacity 0.4s, -webkit-transform 0.4s cubic-bezier(0.7, 0, 0.1, 1) 0.2s;opacity:0;padding:1em}div.select-options .select-search[data-flipping],div.select-options pn-option[data-flipping]{-webkit-transition:opacity 0.4s, -webkit-transform 0s;transition:opacity 0.4s, -webkit-transform 0s;transition:transform 0s, opacity 0.4s;transition:transform 0s, opacity 0.4s, -webkit-transform 0s;-webkit-transform:translate(calc(-1px * var(--dx)), calc(-1px * var(--dy)));transform:translate(calc(-1px * var(--dx)), calc(-1px * var(--dy)))}div.select-options .select-search{z-index:2}div.select-options .select-search+pn-option{margin-top:0.1em}div.select-options pn-option{z-index:1}div.select-options pn-option+pn-option{margin-top:0.1em}div.select-options[data-hidden=true] pn-option.hidden{position:absolute;top:1.1em;opacity:0;width:100%;z-index:0;pointer-events:none;background:transparent}.select-bg{border-right:0.065em solid black;border-left:0.065em solid black;position:absolute;left:0;right:0;top:0;bottom:0;background-color:#fff;-webkit-transition:inherit;transition:inherit;-webkit-transform-origin:top left;transform-origin:top left;pointer-events:none}[data-flipping]>.select-bg{-webkit-transform:scaleY(calc(1 / var(--dh)));transform:scaleY(calc(1 / var(--dh)))}.select-bg-top,.select-bg-bottom{position:absolute;left:0;right:0;height:1.3em;border:0.065em solid black;background-color:white}.select-bg-top{border-radius:0.5em 0.5em 0 0;top:-0.6em;border-bottom:none;-webkit-transition:inherit;transition:inherit}[data-flipping]>.select-bg-top{-webkit-transform:translateY(calc(-1px * var(--dy)));transform:translateY(calc(-1px * var(--dy)))}.select-bg-bottom{border-radius:0 0 0.5em 0.5em;border-top:none;-webkit-transition:inherit;transition:inherit;bottom:-0.6em;z-index:2}[data-flipping]>.select-bg-bottom{-webkit-transform:translateY(calc(-1px * var(--dy)));transform:translateY(calc(-1px * var(--dy)))}.pn-select.upwards .select-content{top:unset;bottom:0;-ms-flex-direction:column-reverse;flex-direction:column-reverse}.pn-select.upwards .select-content div.select-options{bottom:100%;top:unset;-ms-flex-direction:column-reverse;flex-direction:column-reverse}.pn-select.upwards .select-content div.select-options>hr{margin:0 0 0.6em}.pn-select.upwards .select-content div.select-options[data-hidden=true] pn-option.hidden{top:unset;bottom:1.3em}.pn-select.upwards .select-content .select-bg{-webkit-transform-origin:bottom left;transform-origin:bottom left}.pn-select.upwards .select-content .select-bg-bottom{-webkit-transition:none;transition:none}.pn-select.upwards pn-option+pn-option{margin-top:0;margin-bottom:0.1em}.pn-select[data-state=open]{z-index:5;-webkit-transition-delay:0s;transition-delay:0s}.pn-select[data-state=open] div.select-options{position:relative;pointer-events:unset;-webkit-transition:none;transition:none;visibility:visible}.pn-select[data-state=open] div.select-options[data-hidden=true] pn-option{-webkit-transition:opacity 0.2s, background 0.2s, -webkit-transform 0.2s cubic-bezier(0.7, 0, 0.1, 1), -webkit-box-shadow 0.1s;transition:opacity 0.2s, background 0.2s, -webkit-transform 0.2s cubic-bezier(0.7, 0, 0.1, 1), -webkit-box-shadow 0.1s;transition:opacity 0.2s, transform 0.2s cubic-bezier(0.7, 0, 0.1, 1), background 0.2s, box-shadow 0.1s;transition:opacity 0.2s, transform 0.2s cubic-bezier(0.7, 0, 0.1, 1), background 0.2s, box-shadow 0.1s, -webkit-transform 0.2s cubic-bezier(0.7, 0, 0.1, 1), -webkit-box-shadow 0.1s}.pn-select[data-state=open] div.select-options[data-hidden=true] pn-option+.select-search{margin-top:0}.pn-select[data-state=open] div.select-options[data-hidden=true] pn-option[data-flipping]{-webkit-transition:opacity 3s, -webkit-transform 0s;transition:opacity 3s, -webkit-transform 0s;transition:transform 0s, opacity 3s;transition:transform 0s, opacity 3s, -webkit-transform 0s}.pn-select[data-state=open] pn-option,.pn-select[data-state=open] .select-search,.pn-select[data-state=open] hr{opacity:1;-webkit-transition:opacity 0.4s calc(0.2s + var(--i) * 0.03s), background 0.2s, -webkit-transform 0.4s cubic-bezier(0.7, 0, 0.1, 1) 0.2s, -webkit-box-shadow 0.2s;transition:opacity 0.4s calc(0.2s + var(--i) * 0.03s), background 0.2s, -webkit-transform 0.4s cubic-bezier(0.7, 0, 0.1, 1) 0.2s, -webkit-box-shadow 0.2s;transition:opacity 0.4s calc(0.2s + var(--i) * 0.03s), transform 0.4s cubic-bezier(0.7, 0, 0.1, 1) 0.2s, background 0.2s, box-shadow 0.2s;transition:opacity 0.4s calc(0.2s + var(--i) * 0.03s), transform 0.4s cubic-bezier(0.7, 0, 0.1, 1) 0.2s, background 0.2s, box-shadow 0.2s, -webkit-transform 0.4s cubic-bezier(0.7, 0, 0.1, 1) 0.2s, -webkit-box-shadow 0.2s}.pn-select[data-state=open] .select-content{-webkit-transition-delay:0s;transition-delay:0s}.pn-select[data-state=open] .current-selection svg.arrow{-webkit-transform:rotate(-180deg);transform:rotate(-180deg);-webkit-transition-delay:0s;transition-delay:0s}";export{r as pn_select}